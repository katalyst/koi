@import "koi/magnific-popup";

$lightbox-padding-x:        $x-small-unit;
$lightbox-padding-y:        $x-small-unit;
$lightbox-padding-y-bottom: $small-unit;

// Content Container 
.mfp-inline-holder .mfp-content, 
.mfp-ajax-holder .mfp-content {
  background: #fff;
  width: 90%;
  max-width: 740px;
  margin-top: 20px;
  margin-bottom: 20px;
  @include border-radius($border-radius);
  @include box-shadow(2px 2px 2px 0px rgba(0,0,0,0.20));

  .lightbox__small & {
    max-width: 500px;
  }

  .lightbox__tiny & {
    max-width: 400px;
  }

  .lightbox__with-close & {
    margin-top: 50px;
  }
}

.mfp-image-holder .mfp-content {
  @include box-shadow(none);
}

.mfp-image-holder .mfp-figure .mfp-img {
  padding-top: $default-unit;
}

.lightbox--container {
  @include border-radius($border-radius);
}
.lightbox--header {
  background: $black;
  position: relative;
  z-index: 2;
  @include display-flex;
  border-bottom: 2px solid $primary-color;
  @include box-shadow(0px 2px 4px 0px rgba(0,0,0,0.10));
}
.lightbox--header--logo {
  @include display-flex;
  @include align-items(center);
  @include flex-grow(1);
  padding: $xxxx-small-unit $xxx-small-unit;
  @include font($bold-font);
  color: $white;
}
.lightbox--header--close {
  @include display-flex;
  @include align-items(center);
  cursor: pointer;
  width: 44px;

  svg {
    display: block;
    margin: 0 auto;
    width: 16px;
    height: 16px;
  }

  path {
    stroke: #fff;
  }
}
.lightbox--content {
  overflow: auto;
  position: relative;
  z-index: 1;
}
.lightbox--footer {
  // background: $black;
  border-top: $divider;
  padding: $xxxx-small-unit;
}

// Sections in a lightbox
.lightbox--section {
  padding: $lightbox-padding-y $lightbox-padding-x $lightbox-padding-y-bottom $lightbox-padding-x;

  img {
    display: block;
  }

  .lightbox--map {
    height: 200px;
    margin: 0 auto;
  }
}
.lightbox--section + .lightbox--section,
.lightbox--section__flush + .lightbox--section,
.lightbox--section__flush + .lightbox--section__flush {
  border-top: 1px solid $divider-color;
}

// Errors
.lightbox--mailchimp-error {
  display: none;
  margin-bottom: $xx-small-unit;
}

// Register Intro
.lightbox__register--intro {
  display: table;
  table-layout: fixed;

  @include media-query(450px) {
    display: block;
  }
}

.lightbox__register--image,
.lightbox__register--content {
  display: table-cell;
  vertical-align: top;

  @include media-query(450px) {
    display: block;
  }
}

.lightbox__register--image {
  width: 76px;

  img {
    display: block;
  }

  @include media-query(450px) {
    display: none;
  }
}

.lightbox__register--content {
  @include media-query(450px, min) {
    padding-left: $lightbox-padding-x;
  }
}

// Region modal
.lightbox__region--buttons {
  margin-top: $default-unit;
}

// Lightbox Buttons
.lightbox--buttons {
  padding: $small-unit;
  padding-top: 0;

  .button + .button {
    margin-left: $xxxx-small-unit;
  }
}

// Lightbox arrows
.mfp-ajax-holder .mfp-arrow-left,
.mfp-image-holder .mfp-arrow-left {
  left: 0;
  @include grunticon("chevron-left-white", 10px, 18px); 
}

.mfp-ajax-holder .mfp-arrow-right,
.mfp-image-holder .mfp-arrow-right {
  right: 0;
  @include grunticon("chevron-right-white", 10px, 18px);
}
.mfp-ajax-holder .mfp-arrow,
.mfp-image-holder .mfp-arrow {
  @include icon-block($button-height, 10px, $button-height, 18px);
  position: fixed;
  top: 50%;
  background: $secondary-color;
  background: rgba(0,0,0,0.25);
  margin-top: -9px;
  z-index: 9999;
  overflow: visible;
}

// Lightbox Close Button
.mfp-inline-holder .mfp-close, 
.mfp-ajax-holder .mfp-close,
.mfp-figure .mfp-close {
  @include opacity(1);
  position: absolute;
  top: -46px;
  right: -12px;
  color: $white;

  &:active {
    top: -12;
  }

  .lightbox__flush &,
  .lightbox__flush &:active {
    top: -$xxx-small-unit;
    right: -$xxx-small-unit;
  }
}

// Removing Top Padding on Image Lightboxes
.mfp-figure .mfp-img {
  padding-top: 0;
}

// Lightbox Arrows
.mfp-image-holder .mfp-arrow-left {
  // @include grunticon("chevron-left-16-white", 16px);
  left: $xxxxx-small-unit;
  position: absolute;
}

.mfp-image-holder .mfp-arrow-right {
  // @include grunticon("chevron-right-16-white", 16px);
  right: $xxxxx-small-unit;
  position: absolute;
}

// Removing existing arrows
.mfp-image-holder .mfp-arrow-left,
.mfp-image-holder .mfp-arrow-right {
  &:before {
    border: 0;
    @include opacity(1);
  }
}

// Animated Lightbox Start
.lightbox--main .mfp-content,
.lightbox--main .mfp-arrow {
  @include opacity(0);
  @include transition(all 0.2s ease-in-out);
  @include transform(scale(0.8));
}

// Animated Lightbox Open
.lightbox--main.mfp-ready .mfp-content,
.lightbox--main.mfp-ready .mfp-arrow {
  @include opacity(1);
  @include transform(scale(1));
}

// Animated Lightbox Close
.lightbox--main.mfp-removing .mfp-content,
.lightbox--main.mfp-removing .mfp-arrow {
  @include opacity(0);
  @include transform(scale(0.8));
}

// Animated Overlay Start
.lightbox--main.mfp-bg {
  background: $lightbox-overlay-color;
  @include opacity(0.001); /* Chrome opacity transition bug */
  @include transition(opacity 0.3s ease-out);
}

// Animated Overlay Open
.lightbox--main.mfp-ready.mfp-bg {
  @include opacity($lightbox-overlay-opacity);
}

// Animated Overlay Close
.lightbox--main.mfp-removing.mfp-bg {
  @include opacity(0);
}