<% content_for :head do %>
  <style type="text/css">
    .tagify.buttons > span:after { content: " "; }
    .tagify.buttons > span { background-color:#fff; padding: 3px 5px; padding-right:2px; cursor: default; margin-right: 7px; display:inline-block; margin-top:7px;}
    .tagify.buttons > span a { color:#ed6c00; display:inline; margin-left: 4px; cursor: pointer; padding: 3px 5px; font-weight:bold; padding-left:2px; }
    .ui-autocomplete-input { margin-top:7px; display: block;width:190px; }
  </style>

  <script type="text/javascript" charset="utf-8">
    $(function(){

      var myTextArea = $('textarea.tagify').tagify({
        addTagPrompt: "e.g. accounting",
        cssClass: "tagify buttons"
      })

      myTextArea.tagify('inputField').autocomplete({
        source: <%= raw resource_class.tag_counts.collect { |t| t.name } %>,
        position: { of: myTextArea.tagify('containerDiv') },
        close: function(event, ui) { myTextArea.tagify('add'); },
      });

      window.myTextArea = myTextArea;

      myTextArea.closest("form").submit( function() {
        myTextArea.tagify('add');
        myTextArea.tagify('serialize');
      });
    });

  </script>
<% end %>

