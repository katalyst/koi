<script type="text/javascript">

  $ (function() {

    $ ('.insert.asset.application').application (function ($insert)
    {
      var $link = $insert.component ('.insert.asset.link');

      function getHref (arg)
      {
        return 'http://' + window.location.hostname + $link.attr ('href');
      }

      function setHref (arg)
      {
        $link.attr ('href', arg);
      }

      $insert.find ('input[type=radio]').each (function ()
      {
        var $radio = $ (this);
        $radio.change (function () { setHref ($radio.data ('href')) });
      });

      $link.click (function ()
      {
        $ (window).env ('insert') ({ href: getHref (), target: '_blank' });
        $ (window).env ('close') ();
      });

    });
  });
</script>
