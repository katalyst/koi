<%-
  value = f.object.send(attr)
  # fix for data not saving in JSON format
  if value.is_a?(String)
    value = JSON.parse(value)
  end
-%>

<%= react_component("Composable", props: {
  composition: value,
  composableTypes: f.object.class.composable_config,
  icons: {
    image: icon("image"),
    stack: icon("stack"),
    folder: icon("folder"),
    comment: icon("comment"),
    menu: icon("menu"),
    module: icon("module"),
  },
  attr: "#{f.object_name}[#{attr}]"
}) %>
