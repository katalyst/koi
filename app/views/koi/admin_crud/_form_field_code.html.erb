<% editor_id, text_area_id = "#{attr}_code_editor", "#{attr}_text_area" %>
<%= f.input attr, :input_html => { id: text_area_id }, wrapper_html: { class: "hidden" } %>
<%= content_tag :div, "", id: editor_id %>

<script type="text/javascript">
  var <%= editor_id %> = ace.edit("<%= editor_id %>");
  <%= editor_id %>.setTheme("ace/theme/textmate");
  var RubyMode = require("ace/mode/ruby").Mode;
  <%= editor_id %>.getSession().setMode(new RubyMode());
  <%= editor_id %>.getSession().setTabSize(2);
  <%= editor_id %>.getSession().setUseSoftTabs(true);
</script>

