<%=
  crud_settings = resource_class.crud.find(:fields, attr)

  wrapper_opts = {
    class: "",
    data: {}
  }

  input_opts = {
    class: ""
  }

  if crud_settings && crud_settings[:wrapper_data]
    wrapper_opts[:data] = crud_settings[:wrapper_data]
  end

  if crud_settings && crud_settings[:size]
    input_opts[:class] = " form--#{crud_settings[:size]}" 
  else
    input_opts[:class] = "form--medium"
  end

  begin
    render crud_partial(attr, :form, f.object.class), :f => f, :attr => attr, wrapper_opts: wrapper_opts, input_opts: input_opts
  rescue ActionView::MissingTemplate
    render "form_field_default", :f => f, :attr => attr, wrapper_opts: wrapper_opts, input_opts: input_opts
  end
%>
